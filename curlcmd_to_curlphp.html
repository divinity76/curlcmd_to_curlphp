<!DOCTYPE HTML>
<html><head><title>curlcmd_to_curlphp</title>
	<script src="ext/autosize_js/autosize.js" type="text/javascript"></script>
	<script src="compiled-js-shell-parse.js" type="text/javascript"></script>
	
	<script type="text/javascript">
		function parse_parameters(cmd){
			var ret=[];
			var expressions=jsShellParse(cmd);
			//i had a plan here at some point
			return expressions;
		}
		function quote_php(string){
			return JSON.stringify(string);//an ok approximization? 
			}
		function curlcmd_to_curlphp(curlcmd){
			//curl 'https://www.slavehack.com/workimage.php?rand=35' -H 'Accept: image/png,image/*;q=0.8,*/*;q=0.5' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: en-US,en;q=0.5' -H 'Connection: keep-alive' -H 'Cookie: __cfduid=dcff43c4adff4e5e0f5e9c4d6a2df39011425562874; _ga=GA1.2.222395776.1425562864; PHPSESSID=j58ha3f4dhugv7auofre6tmp14; _gat=1' -H 'Host: www.slavehack.com' -H 'Referer: https://www.slavehack.com/index2.php' -H 'User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:36.0) Gecko/20100101 Firefox/36.0'
			var parsed_expressions=parse_parameters(curlcmd);
			var i=0;
			var ret="";
			for(;parsed_expressions.hasOwnProperty(i);++i){
				var parsed_expression=parsed_expressions[i];
				console.log("parsed_expression:",parsed_expression,parsed_expression["command"]);
				if(parsed_expression["command"]== null || parsed_expression["command"]["value"]==null){
					continue;
				}
				if(parsed_expression["command"]["value"].toString().toLowerCase()!="curl"){
					ret+="//Warning: unknown command >>>"+quote_php(parsed_expression["command"]["value"])+"<<< ...Attempting to skip! (but this should be fixed)\n\n";continue;
				}
				ret +="array(";
				var argsi=0;
				var isHeader=false;
				for(;argsi<parsed_expression["args"].length;++argsi){
				ret+="\n";
					var argo=parsed_expression["args"][argsi];
					if(argo["type"]!="literal"){
						ret+="//Warning: only literal argument type supported. detected argument type:"+quote_php(argo["type"])+" ...will pretend its a string literal and continue (this could get ugly..)\n\n";
					}
					var arg=argo["value"];
					if(arg=="-H"){
					if(isHeader){
						ret+="//Warning: detected -H -H (this could be my fault, and that im detecting wrong, but it's probably your fault. you should fix this, if you can. its unsupported. maybe it will fuck shit up.)";
					}
					isHeader=true;
					continue;
					} else {
					isHeader=false;
					}
					if(argsi==0){
						if(false===/http/i.test(arg)){
						ret+="//Warning: expected first parameter to be a string containing http... something looks wrong.\n\n";
						}
						ret+="CURLOPT_URL=>"+quote_php(arg);
						continue;
					}
					ret+=",";
					ret+="TODO: "+quote_php(arg);
				}
				
				ret+="\n);\n\n";
			}
			
			return ret;
		}
		
		
	</script>
</head>
<body>
	<textarea id="curlcmd_text" style="width:100%;">
		curl 'https://www.example.org/trolo.php?rand=35' -H 'Accept: image/png,image/*;q=0.8,*/*;q=0.5' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: en-US,en;q=0.5' -H 'Connection: keep-alive' -H 'Cookie: __cfduid=dfff43c4adff4e5e0f5e9c4d6a2df39011425562874; _ga=GA1.2.222395776.1425562864; PHPSESSID=j58ha3f4dhugv7auofre2tmp14; _gat=1' -H 'Host: www.example.org' -H 'Referer: https://www.example.org/index2.php' -H 'User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:36.0) Gecko/20100101 Firefox/36.0'

		curl 'https://www.example2.org/trolo.php?rand=35' -H 'Accept: image/png,image/*;q=0.8,*/*;q=0.5' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: en-US,en;q=0.5' -H 'Connection: keep-alive' -H 'Cookie: __cfduid=dfff43c4adff4e5e0f5e9c4d6a2df39011425562874; _ga=GA1.2.222395776.1425562864; PHPSESSID=j58ha3f4dhugv7auofre2tmp14; _gat=1' -H 'Host: www.example.org' -H 'Referer: https://www.example2.org/index2.php' -H 'User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:36.0) Gecko/20100101 Firefox/36.0'
	</textarea>
	
	<pre id="curlphp_text"></pre>
</body>
<script type="text/javascript">
	autosize(document.querySelectorAll("#curlcmd_text"));
	document.querySelector("#curlcmd_text").addEventListener("input",function(ev){
		document.querySelector("#curlphp_text").textContent=curlcmd_to_curlphp(ev.target.value);
	})
	document.querySelector("#curlcmd_text").dispatchEvent(new Event('input'));
</script>
</html>